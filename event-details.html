<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Details - Pure Nation</title>
    <meta name="description" content="Join this cleanup event in Sri Lanka" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      .event-details-section {
        padding: 4rem 0;
      }
      
      .event-details-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
      }
      
      .event-image-large {
        width: 100%;
        height: 400px;
        object-fit: cover;
        border-radius: 0.5rem;
        margin-bottom: 2rem;
      }
      
      .event-description {
        margin-bottom: 2rem;
      }
      
      .event-meta-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
      }
      
      .meta-item {
        display: flex;
        align-items: center;
      }
      
      .meta-item i {
        margin-right: 0.5rem;
        color: var(--primary);
      }
      
      .sidebar-card {
        background-color: var(--card);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }
      
      .sidebar-card h3 {
        margin-bottom: 1rem;
        font-size: 1.25rem;
      }
      
      .card-divider {
        height: 1px;
        background-color: var(--border);
        margin: 1rem 0;
      }
      
      .volunteer-list {
        margin-top: 1rem;
      }
      
      .volunteer-item {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem;
      }
      
      .volunteer-avatar {
        width: 2rem;
        height: 2rem;
        border-radius: 50%;
        margin-right: 0.75rem;
      }
      
      .timeline-item {
        position: relative;
        padding-left: 2rem;
        padding-bottom: 1.5rem;
      }
      
      .timeline-item:before {
        content: '';
        position: absolute;
        left: 6px;
        top: 6px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: var(--primary);
      }
      
      .timeline-item:after {
        content: '';
        position: absolute;
        left: 11px;
        top: 18px;
        width: 2px;
        height: calc(100% - 18px);
        background-color: var(--border);
      }
      
      .timeline-item:last-child:after {
        display: none;
      }
      
      .timeline-time {
        font-weight: 500;
        margin-bottom: 0.25rem;
      }
      
      .timeline-text {
        color: var(--text-light);
        font-size: 0.875rem;
      }
      
      .map-container {
        width: 100%;
        height: 200px;
        background-color: var(--muted);
        border-radius: 0.5rem;
        overflow: hidden;
        margin-bottom: 1rem;
      }
      
      .map-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .form-group {
        margin-bottom: 1rem;
      }
      
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }
      
      .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border);
        border-radius: 0.375rem;
        font-size: 1rem;
      }
      
      .form-check {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
      }
      
      .form-check-input {
        margin-right: 0.5rem;
      }
      
      @media (max-width: 768px) {
        .event-details-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navbar - same as index.html -->
    <nav class="navbar">
      <div class="container">
        <div class="navbar-content">
          <a href="/" class="logo">
            <i class="fas fa-leaf"></i>
            <span>Pure Nation</span>
          </a>
          <div class="nav-links" id="navLinks">
            <a href="/" class="nav-link">Home</a>
            <a href="/events.html" class="nav-link">Events</a>
            <a href="/leaderboard.html" class="nav-link">Leaderboard</a>
            <a href="/" class="btn-primary">Get Involved</a>
          </div>
          <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Event Details Section -->
    <section class="event-details-section">
      <div class="container">
        <div id="eventContent">
          <!-- Event details will be loaded by JavaScript -->
        </div>
      </div>
    </section>

    <!-- Related Events Section -->
    <section class="featured-events" style="background-color: var(--muted); padding: 3rem 0;">
      <div class="container">
        <div class="section-header-with-link">
          <div>
            <h2>Similar Events</h2>
            <p>You might also be interested in these cleanup events</p>
          </div>
          <a href="/events.html" class="view-all">View all events <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="events-grid" id="relatedEvents">
          <!-- Related events will be loaded by JavaScript -->
        </div>
      </div>
    </section>

    <!-- Footer - same as index.html -->
    <footer class="footer">
      <div class="container">
        <div class="footer-grid">
          <div class="footer-info">
            <a href="/" class="logo">
              <i class="fas fa-leaf"></i>
              <span>Pure Nation</span>
            </a>
            <p>Working together to create a cleaner, greener Sri Lanka through community action and environmental awareness.</p>
            <div class="social-links">
              <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
              <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
              <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-link"><i class="fas fa-envelope"></i></a>
            </div>
          </div>
          <div class="footer-links">
            <h3>Resources</h3>
            <ul>
              <li><a href="/">How to Volunteer</a></li>
              <li><a href="/">Sponsorship Opportunities</a></li>
              <li><a href="/">Education Materials</a></li>
              <li><a href="/">Waste Management Tips</a></li>
            </ul>
          </div>
          <div class="footer-contact">
            <h3>Contact Us</h3>
            <p>Have questions or suggestions? We'd love to hear from you.</p>
            <form id="contactForm">
              <input type="email" placeholder="Your email" required>
              <textarea placeholder="Your message" rows="3" required></textarea>
              <button type="submit" class="btn-primary">Send Message</button>
            </form>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; <span id="currentYear"></span> Pure Nation. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script src="script.js"></script>
    <script>
      // Extended event data for detailed view
      const extendedEventData = {
        1: {
          id: 1,
          title: "Colombo Beach Cleanup",
          date: "2023-06-15",
          time: "9:00 AM",
          endTime: "1:00 PM",
          location: "Mount Lavinia Beach",
          address: "Gold Coast Beach Road, Mount Lavinia, Colombo",
          description: "Join us for a community cleanup at one of Colombo's most popular beaches. Help remove plastic waste and learn about marine conservation. We'll be focusing on removing plastic bottles, bags, and other debris that harm marine life and pollute our beautiful coastline.\n\nThis event is suitable for volunteers of all ages, and families are welcome. We'll provide all necessary equipment including gloves, bags, and cleaning tools, but feel free to bring your own reusable water bottle.",
          image: "ColomboBeachCleanup.jpg",
          status: "active",
          tags: ["Beach", "Plastic", "Community"],
          volunteersJoined: 45,
          volunteersNeeded: 60,
          sponsor: "Blue Ocean Alliance",
          equipment: ["Gloves", "Trash bags", "Water", "Sunscreen", "Hat"],
          schedule: [
            { time: "8:30 AM", activity: "Registration & Equipment Distribution" },
            { time: "9:00 AM", activity: "Welcome & Safety Briefing" },
            { time: "9:15 AM", activity: "Cleanup Begins" },
            { time: "11:00 AM", activity: "Refreshment Break" },
            { time: "11:30 AM", activity: "Continue Cleanup" },
            { time: "12:45 PM", activity: "Waste Sorting & Environmental Talk" },
            { time: "1:00 PM", activity: "Closing & Group Photo" }
          ],
          volunteers: [
            { name: "Sanjana Perera", avatar: "https://i.pravatar.cc/150?img=1" },
            { name: "Asanka Fernando", avatar: "https://i.pravatar.cc/150?img=2" },
            { name: "Dinesha Silva", avatar: "https://i.pravatar.cc/150?img=3" },
            { name: "Malik Jayawardena", avatar: "https://i.pravatar.cc/150?img=4" }
          ],
          organizer: { name: "Chaminda Rajakaruna", avatar: "https://i.pravatar.cc/150?img=22", title: "Environmental Officer" }
        },
        2: {
          id: 2,
          title: "Kandy Forest Restoration",
          date: "2023-06-22",
          time: "8:30 AM",
          endTime: "2:00 PM",
          location: "Udawatta Kele Sanctuary",
          address: "Udawatta Kele Sanctuary, Kandy",
          description: "Help us plant native trees and restore the forest ecosystem in this ancient sanctuary. Equipment and saplings will be provided.\n\nUdawatta Kele Sanctuary is a historic forest reserve that serves as the green lung of Kandy city. This reforestation effort aims to restore areas affected by invasive species and enhance biodiversity in this important ecosystem.\n\nOur experts will guide you in proper tree planting techniques and share knowledge about native plant species. This is a great opportunity to contribute to Sri Lanka's forest conservation efforts.",
          image: "https://source.unsplash.com/random/1200x800/?forest,planting",
          status: "active",
          tags: ["Forest", "Planting", "Conservation"],
          volunteersJoined: 28,
          volunteersNeeded: 40,
          sponsor: "Green Earth Foundation",
          equipment: ["Gloves", "Water", "Comfortable shoes", "Hat", "Insect repellent"],
          schedule: [
            { time: "8:00 AM", activity: "Registration" },
            { time: "8:30 AM", activity: "Introduction & Site Orientation" },
            { time: "9:00 AM", activity: "Tree Planting Workshop" },
            { time: "10:00 AM", activity: "Planting Activities Begin" },
            { time: "12:00 PM", activity: "Lunch Break" },
            { time: "1:00 PM", activity: "Continue Planting & Site Maintenance" },
            { time: "1:45 PM", activity: "Discussion on Forest Conservation" },
            { time: "2:00 PM", activity: "Closing Ceremony" }
          ],
          volunteers: [
            { name: "Ishara Gunasekara", avatar: "https://i.pravatar.cc/150?img=5" },
            { name: "Dilshan Perera", avatar: "https://i.pravatar.cc/150?img=6" },
            { name: "Kumari Bandara", avatar: "https://i.pravatar.cc/150?img=7" }
          ],
          organizer: { name: "Dr. Anura Sathurusinghe", avatar: "https://i.pravatar.cc/150?img=23", title: "Forest Conservation Specialist" }
        }
      };

      document.addEventListener('DOMContentLoaded', function() {
        // Get event ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const eventId = urlParams.get('id');
        
        if (eventId && extendedEventData[eventId]) {
          loadEventDetails(extendedEventData[eventId]);
          loadRelatedEvents(eventId);
        } else {
          // Fallback to first event if no valid ID
          loadEventDetails(extendedEventData[1]);
          loadRelatedEvents(1);
        }
      });

      function loadEventDetails(event) {
        const eventContentContainer = document.getElementById('eventContent');
        if (!eventContentContainer) return;
        
        // Format date
        const eventDate = new Date(event.date);
        const formattedDate = eventDate.toLocaleDateString('en-US', {
          weekday: 'long',
          month: 'long', 
          day: 'numeric',
          year: 'numeric'
        });
        
        // Calculate progress percentage
        const progressPercent = (event.volunteersJoined / event.volunteersNeeded) * 100;
        
        // Generate tags HTML
        const tagsHTML = event.tags.map(tag => `<span class="event-tag">${tag}</span>`).join('');
        
        // Generate schedule HTML
        const scheduleHTML = event.schedule.map(item => `
          <div class="timeline-item">
            <div class="timeline-time">${item.time}</div>
            <div class="timeline-text">${item.activity}</div>
          </div>
        `).join('');
        
        // Generate equipment list HTML
        const equipmentHTML = event.equipment.map(item => `
          <div class="form-check">
            <input type="checkbox" class="form-check-input">
            <label class="form-check-label">${item}</label>
          </div>
        `).join('');
        
        // Generate volunteers HTML
        const volunteersHTML = event.volunteers.map(volunteer => `
          <div class="volunteer-item">
            <img src="${volunteer.avatar}" alt="${volunteer.name}" class="volunteer-avatar">
            <div>${volunteer.name}</div>
          </div>
        `).join('');
        
        // Set page title
        document.title = `${event.title} - Pure Nation`;
        
        eventContentContainer.innerHTML = `
          <div class="event-details-grid">
            <div class="event-main-content">
              <h1 class="heading-lg">${event.title}</h1>
              <div class="event-tags" style="margin: 1rem 0;">
                ${tagsHTML}
                ${event.status === 'active' ? 
                  '<span class="event-tag status-active" style="background-color: var(--secondary); color: white;">Active</span>' : 
                  '<span class="event-tag status-completed" style="background-color: var(--muted); color: var(--text-light);">Completed</span>'
                }
              </div>
              <img src="${event.image}" alt="${event.title}" class="event-image-large">
              
              <div class="event-meta-grid">
                <div class="meta-item">
                  <i class="fas fa-calendar"></i>
                  <span>${formattedDate}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-clock"></i>
                  <span>${event.time} - ${event.endTime}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>${event.location}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-users"></i>
                  <span>${event.volunteersJoined}/${event.volunteersNeeded} Volunteers</span>
                </div>
              </div>
              
              <div class="event-description">
                <h2 class="heading-md">About This Event</h2>
                <p style="white-space: pre-line; margin-top: 0.75rem;">${event.description}</p>
              </div>
              
              <div class="sidebar-card" style="margin-top: 2rem;">
                <h2 class="heading-md">Event Schedule</h2>
                <div class="timeline" style="margin-top: 1.5rem;">
                  ${scheduleHTML}
                </div>
              </div>
            </div>
            
            <div class="event-sidebar">
              <div class="sidebar-card">
                <h3>Registration</h3>
                <div class="volunteer-progress" style="margin-bottom: 1rem;">
                  <div class="progress-header">
                    <span><i class="fas fa-users"></i> Volunteers</span>
                    <span>${event.volunteersJoined}/${event.volunteersNeeded}</span>
                  </div>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progressPercent}%"></div>
                  </div>
                </div>
                ${event.status === 'active' ?
                  `<button class="btn-primary" style="width: 100%;">Join This Event</button>` :
                  `<button class="btn-primary" style="width: 100%; opacity: 0.7;" disabled>Event Completed</button>`
                }
                <div class="card-divider"></div>
                <h3>Organizer</h3>
                <div class="volunteer-item" style="margin-bottom: 0;">
                  <img src="${event.organizer.avatar}" alt="${event.organizer.name}" class="volunteer-avatar">
                  <div>
                    <div>${event.organizer.name}</div>
                    <small style="color: var(--text-light);">${event.organizer.title}</small>
                  </div>
                </div>
                ${event.sponsor ? 
                  `<div class="card-divider"></div>
                  <div style="font-size: 0.875rem;">
                    <strong>Sponsored by:</strong> ${event.sponsor}
                  </div>` : ''
                }
              </div>
              
              <div class="sidebar-card">
                <h3>Location</h3>
                <div class="map-container">
                  <img src="https://source.unsplash.com/random/600x300/?map" alt="Map">
                </div>
                <p style="font-size: 0.875rem; margin-bottom: 1rem;">${event.address}</p>
                <a href="https://maps.google.com/?q=${encodeURIComponent(event.address)}" target="_blank" class="btn-outline" style="width: 100%; text-align: center;">
                  <i class="fas fa-directions"></i> Get Directions
                </a>
              </div>
              
              <div class="sidebar-card">
                <h3>What to Bring</h3>
                <div class="equipment-list">
                  ${equipmentHTML}
                </div>
              </div>
              
              <div class="sidebar-card">
                <h3>Volunteers (${event.volunteers.length})</h3>
                <div class="volunteer-list">
                  ${volunteersHTML}
                </div>
                ${event.volunteers.length > 3 ? 
                  `<div style="text-align: center; margin-top: 0.5rem;">
                    <a href="#" class="view-all">View all volunteers</a>
                  </div>` : ''
                }
              </div>
              
              <div class="sidebar-card">
                <h3>Share This Event</h3>
                <div class="social-links" style="justify-content: center; margin-top: 0.5rem;">
                  <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                  <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                  <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
                  <a href="#" class="social-link"><i class="fas fa-envelope"></i></a>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      function loadRelatedEvents(currentEventId) {
        const relatedContainer = document.getElementById('relatedEvents');
        if (!relatedContainer) return;
        
        // Get all event IDs except the current one
        const relatedEventIds = Object.keys(extendedEventData)
          .filter(id => parseInt(id) !== parseInt(currentEventId));
        
        // Take up to 3 related events
        const eventsToShow = relatedEventIds.slice(0, 3).map(id => extendedEventData[id]);
        
        // For demo purposes, also include some from main eventData
        if (eventData && eventsToShow.length < 3) {
          const additionalEvents = eventData
            .filter(event => event.id !== parseInt(currentEventId) && 
                    !eventsToShow.some(e => e.id === event.id))
            .slice(0, 3 - eventsToShow.length);
          
          eventsToShow.push(...additionalEvents);
        }
        
        // Load events into container
        eventsToShow.forEach(event => {
          const eventCard = document.createElement('div');
          eventCard.className = 'event-card';
          
          // Calculate progress percentage
          const progressPercent = (event.volunteersJoined / event.volunteersNeeded) * 100;
          
          // Format date
          const eventDate = new Date(event.date);
          const formattedDate = eventDate.toLocaleDateString('en-US', {
            month: 'short',
            day: 'numeric', 
            year: 'numeric'
          });
          
          eventCard.innerHTML = `
            <div class="event-image">
              <img src="${event.image}" alt="${event.title}">
              ${event.status === 'active' ? 
                '<div class="event-status status-active">Active</div>' : 
                '<div class="event-status status-completed">Completed</div>'
              }
            </div>
            <div class="event-content">
              <div class="event-tags">
                ${event.tags.map(tag => `<span class="event-tag">${tag}</span>`).join('')}
              </div>
              <h3 class="event-title">${event.title}</h3>
              <div class="event-meta">
                <i class="fas fa-calendar"></i>
                <span>${formattedDate} â€¢ ${event.time}</span>
              </div>
              <div class="event-meta">
                <i class="fas fa-map-marker-alt"></i>
                <span>${event.location}</span>
              </div>
              <p class="event-description">${event.description.split('\n')[0]}</p>
              <div class="volunteer-progress">
                <div class="progress-header">
                  <span><i class="fas fa-users"></i> Volunteers</span>
                  <span>${event.volunteersJoined}/${event.volunteersNeeded}</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: ${progressPercent}%"></div>
                </div>
              </div>
              ${event.sponsor ? `<div class="event-sponsor">Sponsored by <span>${event.sponsor}</span></div>` : ''}
              <a href="/event-details.html?id=${event.id}" class="btn-primary" style="width: 100%; text-align: center;">
                ${event.status === 'completed' ? 'View Details' : 'Join Cleanup'}
              </a>
            </div>
          `;
          
          relatedContainer.appendChild(eventCard);
        });
      }
    </script>
  </body>
</html>